"use strict";

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

(function () {
  function switchCompany(e) {
    /*Show popover on click */
    var switchParent = e.target.closest('.switch-btn');
    var currentPopover;

    if (switchParent) {
      currentPopover = switchParent.querySelector('.switch-popover');
    }

    if (e.target.classList.contains('switch-target')) {
      if (currentPopover.style.display === 'none') {
        currentPopover.style.display = 'block';
      }
    }
    /*Turn on/off company card */


    if (e.target.classList.contains('popover-content') && e.target.classList.contains('text-on')) {
      e.target.innerHTML = 'Выключить';
      e.target.classList.remove('text-on');
      e.target.classList.add('text-off');
      e.target.closest('.company-block').classList.add('active');
      currentPopover.style.display = 'none';
    } else if (e.target.classList.contains('popover-content') && e.target.classList.contains('text-off')) {
      e.target.innerHTML = 'Включить';
      e.target.classList.remove('text-off');
      e.target.classList.add('text-on');
      e.target.closest('.company-block').classList.remove('active');
      currentPopover.style.display = 'none';
    }
  }
  /*Outside click */


  function hidePopup(e) {
    var popover = _toConsumableArray(document.querySelectorAll('.switch-popover'));

    if (e.target.closest('.switch-popover') || e.target.closest('.switch-target')) return;
    popover.map(function (item) {
      if (item.style.display === 'block') {
        item.style.display = 'none';
      }
    });
  }

  var content = document.querySelector('.content');
  content.addEventListener('click', switchCompany);
  document.addEventListener('click', hidePopup);
})();
//# sourceMappingURL=main.min.js.map
